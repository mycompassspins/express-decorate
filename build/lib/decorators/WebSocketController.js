"use strict";
const ValidatePaths_1 = require('./ValidatePaths');
function WebSocketController(...args) {
    const [ctrlPath, ctrlMiddleware] = ValidatePaths_1.Destruct(args);
    return (target) => {
        const proto = target.prototype;
        proto.$routes = Object.getOwnPropertyNames(proto)
            .filter((prop) => prop.indexOf(ValidatePaths_1.ROUTE_PREFIX) === 0)
            .map((prop) => {
            const { path, middleware: actionMiddleware } = proto[prop];
            let mountpath = `${ctrlPath}`, middleware = ctrlMiddleware.concat(actionMiddleware), fnName = prop.substring(ValidatePaths_1.ROUTE_PREFIX.length), route;
            route = { mountpath: mountpath, path: path, middleware: middleware, fnName: fnName };
            return route;
        });
    };
}
exports.WebSocketController = WebSocketController;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9kZWNvcmF0b3JzL1dlYlNvY2tldENvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUlBLGdDQUF1QyxpQkFFdkMsQ0FBQyxDQUZ1RDtBQWdCeEQsNkJBQW9DLEdBQUcsSUFBVTtJQUdoRCxNQUFNLENBQUMsUUFBUSxFQUFFLGNBQWMsQ0FBQyxHQUFHLHdCQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFbEQsTUFBTSxDQUFDLENBQUMsTUFBd0I7UUFHL0IsTUFBTSxLQUFLLEdBQU8sTUFBTSxDQUFDLFNBQVMsQ0FBQztRQUluQyxLQUFLLENBQUMsT0FBTyxHQUFzQixNQUFNLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDO2FBQ2xFLE1BQU0sQ0FBQyxDQUFDLElBQVcsS0FBSyxJQUFJLENBQUMsT0FBTyxDQUFDLDRCQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDekQsR0FBRyxDQUFDLENBQUMsSUFBVztZQUVoQixNQUFNLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxnQkFBZ0IsRUFBRSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUUzRCxJQUFJLFNBQVMsR0FBVSxHQUFHLFFBQVEsRUFBRSxFQUNuQyxVQUFVLEdBQW1CLGNBQWMsQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsRUFDcEUsTUFBTSxHQUFVLElBQUksQ0FBQyxTQUFTLENBQUMsNEJBQVksQ0FBQyxNQUFNLENBQUMsRUFDbkQsS0FBcUIsQ0FBQztZQUd2QixLQUFLLEdBQUcsRUFBRSxXQUFBLFNBQVMsRUFBRSxNQUFBLElBQUksRUFBRSxZQUFBLFVBQVUsRUFBRSxRQUFBLE1BQU0sRUFBRSxDQUFDO1lBQ2hELE1BQU0sQ0FBQyxLQUFLLENBQUM7UUFDZCxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQTtBQUNGLENBQUM7QUE1QmUsMkJBQW1CLHNCQTRCbEMsQ0FBQSIsImZpbGUiOiJsaWIvZGVjb3JhdG9ycy9XZWJTb2NrZXRDb250cm9sbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IEp1c3RpbiBvbiA4LzI3LzE2LlxuICovXG5cbmltcG9ydCB7IERlc3RydWN0LCBST1VURV9QUkVGSVggfSBmcm9tICcuL1ZhbGlkYXRlUGF0aHMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgSVdlYlNvY2tldFJvdXRlXG57XG5cdG1vdW50cGF0aDpzdHJpbmd8c3RyaW5nW107XG5cdHBhdGg6c3RyaW5nfHN0cmluZ1tdO1xuXHRtaWRkbGV3YXJlOnN0cmluZ3xzdHJpbmdbXTtcblx0Zm5OYW1lOnN0cmluZztcbn1cblxuLyoqXG4gKiBAdXNhZ2UgQENvbnRyb2xsZXIocGF0aDogb3B0aW9uYWwsIC4uLm1pZGRsZXdhcmU6IG9wdGlvbmFsKVxuICogQHBhcmFtIGFyZ3NcbiAqIEByZXR1cm5zIHsodGFyZ2V0OmFueSk9PnZvaWR9XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFdlYlNvY2tldENvbnRyb2xsZXIoLi4uYXJnczphbnlbXSk6RnVuY3Rpb25cbntcblx0Ly8gdmFsaWRhdGUgLi4uYXJnc1xuXHRjb25zdCBbY3RybFBhdGgsIGN0cmxNaWRkbGV3YXJlXSA9IERlc3RydWN0KGFyZ3MpO1xuXG5cdHJldHVybiAodGFyZ2V0Ok9iamVjdENvbnN0cnVjdG9yKTp2b2lkID0+XG5cdHtcblx0XHQvLyBBZGQgYSAkcm91dGVzIHByb3BlcnR5IHRvIHRoZSBjbGFzcydzIHByb3RvdHlwZVxuXHRcdGNvbnN0IHByb3RvOmFueSA9IHRhcmdldC5wcm90b3R5cGU7XG5cblx0XHQvLyBGaWx0ZXIgcHJvdG90eXBlJ3MgcHJvcGVydGllcyBieSB0aG9zZSBwcmVmaXhlZCB3aXRoICQkcm91dGVfXG5cdFx0Ly8gYW5kIGF0dGFjaCBtZXRob2QsIHBhdGhzLCBtaWRkbGV3YXJlIGFuZCBjb250cm9sbGVyIGFjdGlvbiB0byBvdXIgJHJvdXRlIHByb3BlcnR5XG5cdFx0cHJvdG8uJHJvdXRlcyA9IDxJV2ViU29ja2V0Um91dGVbXT5PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwcm90bylcblx0XHRcdC5maWx0ZXIoKHByb3A6c3RyaW5nKSA9PiBwcm9wLmluZGV4T2YoUk9VVEVfUFJFRklYKSA9PT0gMClcblx0XHRcdC5tYXAoKHByb3A6c3RyaW5nKTpJV2ViU29ja2V0Um91dGUgPT5cblx0XHRcdHtcblx0XHRcdFx0Y29uc3QgeyBwYXRoLCBtaWRkbGV3YXJlOiBhY3Rpb25NaWRkbGV3YXJlIH0gPSBwcm90b1twcm9wXTtcblxuXHRcdFx0XHRsZXQgbW91bnRwYXRoOnN0cmluZyA9IGAke2N0cmxQYXRofWAsXG5cdFx0XHRcdFx0bWlkZGxld2FyZTpzdHJpbmd8c3RyaW5nW10gPSBjdHJsTWlkZGxld2FyZS5jb25jYXQoYWN0aW9uTWlkZGxld2FyZSksXG5cdFx0XHRcdFx0Zm5OYW1lOnN0cmluZyA9IHByb3Auc3Vic3RyaW5nKFJPVVRFX1BSRUZJWC5sZW5ndGgpLFxuXHRcdFx0XHRcdHJvdXRlOklXZWJTb2NrZXRSb3V0ZTtcblxuXHRcdFx0XHQvLyBXZSBuZWVkIG1vdW50cGF0aCwgbW91bnRwYXRoIGFuZCBwYXRoIG1hcCB0byB0aGUgb3JpZ2luYWxVcmwsIGJhc2VVcmwgYW5kIHBhdGggb24gRXhwcmVzcydzIHJlcXVlc3Qgb2JqZWN0XG5cdFx0XHRcdHJvdXRlID0geyBtb3VudHBhdGgsIHBhdGgsIG1pZGRsZXdhcmUsIGZuTmFtZSB9O1xuXHRcdFx0XHRyZXR1cm4gcm91dGU7XG5cdFx0XHR9KVxuXHR9XG59XG5cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
